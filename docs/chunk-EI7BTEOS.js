import{a as L,b as O,c as Q,d as W,e as j}from"./chunk-K5T5SVC3.js";import{A as M,Aa as G,Ea as m,F as b,Fa as p,Ga as f,H as S,Ha as d,J as D,Ja as u,La as y,Ma as C,Na as _,O as T,P as g,Pa as h,Xa as I,_ as P,g as v,ha as k,ja as s,pa as c,qa as F,u as w,wa as x,ya as l}from"./chunk-74FURJFT.js";function R(o,t){o&1&&f(0,"img",2),o&2&&l("src",t.base64DataURL,k)("alt",t.filename)}var E=(()=>{let t=class t{constructor(){this.imageInfo=F.required()}fileChange(r){let e=r.target.files?.[0];if(!e)return;let i=new FileReader;i.readAsDataURL(e),i.onloadend=()=>{let n=i.result;if(n&&typeof n=="string"){let a=n.substring(`data:${e.type};base64,`.length);this.imageInfo.set({base64DataURL:n,base64Data:a,mimeType:e.type,filename:e.name})}}}};t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=g({type:t,selectors:[["app-image-preview"]],inputs:{imageInfo:[T.SignalBased,"imageInfo"]},outputs:{imageInfo:"imageInfoChange"},standalone:!0,features:[h],decls:5,vars:1,consts:[["for","fileInput"],["id","fileInput","name","fileInput","alt","image input","type","file","accept",".jpg,.jpeg,.png",3,"change"],["width","250","height","250",3,"src","alt"]],template:function(e,i){if(e&1&&(m(0,"div")(1,"label",0),u(2,"Select an image:"),p(),m(3,"input",1),d("change",function(a){return i.fileChange(a)}),p()(),x(4,R,1,2,"img",2)),e&2){let n;s(4),G(4,(n=i.imageInfo())?4:-1,n)}},styles:["input[type=file][_ngcontent-%COMP%]{margin-bottom:.75rem}label[_ngcontent-%COMP%]{margin-right:.5rem}img[_ngcontent-%COMP%]{object-fit:contain}"],changeDetection:0});let o=t;return o})();var te=(()=>{let t=class t{constructor(){this.geminiService=P(j),this.prompt=c(""),this.loading=c(!1),this.imageInfo=c(null),this.askQuestion=I(()=>({base64Data:this.imageInfo()?.base64Data,mimeType:this.imageInfo()?.mimeType,prompt:this.prompt()})),this.viewModel=I(()=>({isLoading:this.loading(),askQuestion:this.askQuestion()})),this.isClicked$=new v,this.chatHistory=L(this.isClicked$.pipe(w(()=>this.askQuestion().prompt!==""&&!!this.askQuestion().base64Data),D(()=>this.loading.set(!0)),S(()=>this.geminiService.generateTextFromMultimodal(this.askQuestion()).pipe(M(()=>this.loading.set(!1)))),b((r,e)=>r.concat({prompt:this.prompt(),response:e}),[])),{initialValue:[]})}get vm(){return this.viewModel()}};t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=g({type:t,selectors:[["app-generate-text-multimodal"]],standalone:!0,features:[h],decls:6,vars:4,consts:[[1,"container"],[1,"image-preview",3,"imageInfo","imageInfoChange"],[3,"loading","prompt","promptChange","askMe"],[3,"chatHistory"]],template:function(e,i){e&1&&(m(0,"h3"),u(1,"Input a prompt and select an image to receive an answer from the Google Gemini AI"),p(),m(2,"div",0)(3,"app-image-preview",1),_("imageInfoChange",function(a){return C(i.imageInfo,a)||(i.imageInfo=a),a}),p(),m(4,"app-prompt-box",2),_("promptChange",function(a){return C(i.prompt,a)||(i.prompt=a),a}),d("askMe",function(){return i.isClicked$.next()}),p()(),f(5,"app-chat-history",3)),e&2&&(s(3),y("imageInfo",i.imageInfo),s(),l("loading",i.loading()),y("prompt",i.prompt),s(),l("chatHistory",i.chatHistory()))},dependencies:[O,Q,E,W],styles:["h3[_ngcontent-%COMP%]{margin-bottom:1rem}div.container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.image-preview[_ngcontent-%COMP%]{margin-bottom:.75rem}"],changeDetection:0});let o=t;return o})();export{te as GenerateTextMultimodalComponent};
